<!DOCTYPE html>
<html>
<head>
	<title>Show Product</title>
	{% load mathfilters %}
	{% load static %}
	<link rel="stylesheet" type="text/css" href="{% static 'guiltypleasure/css/style.css' %}" media="screen" title="no title" charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.3/css/materialize.min.css">
  <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/css/materialize.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/js/materialize.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.3/js/materialize.min.js"></script>
</head>
<body>
	<header>
		 <div class="container">
				<nav>
					 <div class="nav-wrapper black">
							<a href="/"><img src="../../static/guiltypleasure/images/GuiltyPleasures.jpg" height="100%"></a>
							<ul class="right hide-on-med-and-down">
								 <li><a href="/log_reg"><i class="material-icons">account_circle</i></a></li>
								 <li><a href="/customer_logout"><i class="material-icons">cancel</i></a></li>
								 <li><a href="/cart"><i class="material-icons">shopping_cart</i></a></li>
							</ul>
					 </div>
				</nav>
		 </div>
	</header>
<main>
	<div class="container white">
		<div class="row">
		<div class="col s12">
			<h4>{{product.name}}</h4>
			<a class="btn waves-effect waves-light deep-orange darken-4" href="/">Go Back</a>
			<div class='col s6' id="show-image">
					<img src='../../{{image}}' height="100%"/>
			</div>
			<div class="container white col s6">
					<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
					<form id="post-form" class="right">
						<select id="quantity" class="browser-default">
							<option value="" disabled selected>Quantity</option>
							<option value="1">1 {{product.price|mul:1}}</option>
							<option value="2">2 {{product.price|mul:2}}</option>
							<option value="3">3 {{product.price|mul:3}}</option>
						</select>
					<input type="submit" name="BUY!" class="btn waves-effect waves-light deep-orange darken-4" onclick="Materialize.toast('Item Added to Cart',2000)">
					</form>
			 </div>
		 </div>

		</div>
	</div>
	<!-- <div class="container white">
		<h5>Similar Items</h5>
		 {% for product in similarproducts %}
			<img src="{{product.source}}">
      {{product.price}}
      {{product.name}}
		{% endfor %}
	</div> -->
</main>

<script type="text/javascript">// Submit post on submit
	$('#post-form').on('submit', function(event){
	    event.preventDefault();
	    console.log("form submitted!")  // sanity check
	    create_post();
	});
</script>
<script type="text/javascript">
	// AJAX for posting
	function create_post() {
	    console.log("create post is working!") // sanity check
	    console.log($('#quantity').val())
	    var csrf_token = '<%= token_value %>';
	    var v_token = "csrf_token()";
		$("body").bind("ajaxSend", function(elm, xhr, s){
			if (s.type == "POST") {
				xhr.setRequestHeader('X-CSRF-Token', getCSRFTokenValue());
			}
		});
		console.log("starting ajax now")
	    $.ajax({
	        url : "/add_to_cart", // the endpoint
	        type : "POST", // http method
	        data : {the_post : $('#quantity').val(), _token: v_token }, // data sent with the post request
	  		/*data : {CSRF: getCSRFTokenValue()},*/
	    });
	    console.log("create post finished running")
	};
</script>

<script type="text/javascript">
	$(document).ready(function(){
      $('.slider').slider({full_width: true});
    });
</script>

<footer class="page-footer black">
	<div class="container black">
		 <div class="row">
				<div class="col l6 s12">
						<h5 class="white-text">Footer Content</h5>
						<p class="grey-text text-lighten-4">You can use rows and columns here to organize your footer content.</p>
				</div>
		 </div>
	</div>
</footer>
</body>
</html>
